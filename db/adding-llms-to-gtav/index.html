<!DOCTYPE html>
<html lang="en">
<head>
<!-- 2024-06-23 Sun 00:25 -->
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Adding LLMs to GTA V</title>
<meta name="author" content="Ja" />
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="../../styles.css" />
</head>
<body>
<div id="preamble" class="status">
<div style='display: flex; justify-content: center'><ul id='banner'><li> <a href='../../index.html'><< back</a></li></ul></div><style>#banner { margin:0; list-style-type: none }#banner li {  float: left;}#banner li a, #banner li a:visited {display: block;padding: 10px;color: #07a;text-decoration: none;}</style><br>
</div>
<div id="content" class="content">
<div id="outline-container-orgda1731e" class="outline-2">
<h2 id="orgda1731e">Adding LLMs to GTA V</h2>
<div class="outline-text-2" id="text-orgda1731e">
<p>
StreetSmarts, a GTA mod inspired by <a href="https://www.gta5-mods.com/scripts/inworld-sentient-streets-ai-story-mode">SentientStreets</a>
</p>

<div class="center-iframe"><iframe width="560" height="315" src="https://www.youtube.com/embed/SWxu3YMNmgk?si=KAhGVjKTT_S9m2tq" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe></div>

<p>
Character output is generated by <a href="https://ai.meta.com/blog/meta-llama-3/">LLaMA 3 8B Instruct</a> running on an M1 Mac. The code was quickly hacked together.
</p>

<p>
Recurring characters are scattered throughout the map with saved chats, which means you can continue
conversations with them and build relationships. Conversations with non-recurring characters (like
random pedestrians) aren't saved.
</p>

<p>
For those unfamiliar with LLMs, model outputs can be tweaked with prompts.
Here the model can be guided to output only in JSON, only speak in pig latin, or in this case,
roleplay as a character within Los Santos.
</p>


<figure id="org59d54f7">
<img src="./images/1.png" alt="1.png" class="center-image" width="600px :height: 400px">

<figcaption><span class="figure-number">Figure 1: </span>Recurring characters are blips on the map. Metadata like name, location, and personality is stored in separate files for each character.</figcaption>
</figure>

<p>
NPCs can also take actions based on the state of the conversation. Currently there's 3 actions: fight,
follow, and run away. Some characters run away when threatened, and others are easily angered
and resort to fighting. More outgoing characters are likely to accept an invitation somewhere,
while others aren't so interested.
</p>

<p>
The simplest way to calculate character actions is to feed outputs back into the model
to output probabilities for fear, anger, follow. The output looks something like this:
</p>
<div class="org-src-container">
<pre class="src src-json">{"angry": 0.92, "scared": 0.15}
</pre>
</div>

<p>
The results were fairly accurate; if I were to guess, around 90% of the actions taken
(attacking or running away from the player) felt normal and not out of the ordinary.
</p>

<p>
I stopped working on the mod, but there's still more to do:
</p>
<ul class="org-ul">
<li>Voice input</li>
<li>Text-to-speech output</li>
<li>Use a better model, like Gemini Flash, which is faster and has vision capabilities</li>
<li>More actions (cheer, dance, shoot, lead, etc)</li>
<li>Custom missions like SentientStreets</li>
</ul>

<p>
  Video games are very obviously going to leverage LLMs soon. Unfortunately GTA 6 is coming out
  2 years too too early -- a worthy successor to GTA V deserves to have better NPCs.
</p>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class='date'>Last updated: 2024-06-19 Wed 21:00</p>
</div>
</body>
</html>
